# Интеграция генерации протоколов встреч в Telegram-бота

В этом документе описаны изменения, внесенные в Telegram-бота для добавления функциональности автоматической генерации структурированных протоколов встреч на основе голосовых сообщений.

## Обзор новой функциональности

Теперь бот может не только преобразовывать голосовые сообщения в текст, но и автоматически создавать из них структурированные протоколы встреч в формате PDF. Эта функциональность полностью бесплатна и работает локально, без использования платных API.

### Основные возможности:
- Преобразование голосовых сообщений в структурированные протоколы встреч
- Автоматическое выделение повестки, вопросов и решений
- Генерация PDF-документов с профессиональным форматированием
- Полностью локальная работа без отправки данных на внешние серверы
- Использование бесплатных моделей искусственного интеллекта

## Технические детали

### Компоненты решения:
1. **Ollama** - локальный сервер для запуска языковых моделей
2. **LLaMA 3 / Mistral** - бесплатные языковые модели с открытым исходным кодом
3. **WeasyPrint** - библиотека для создания PDF-документов
4. **Модуль protocol_generator.py** - генерация протоколов на основе расшифровки
5. **Модуль protocol_bot.py** - интеграция с Telegram-ботом

### Процесс работы:
1. Пользователь отправляет голосовое сообщение с резюме встречи
2. Бот преобразует голосовое сообщение в текст с помощью Whisper или Vosk
3. Текст отправляется в локальную языковую модель через Ollama API
4. Модель структурирует текст в формат протокола встречи
5. Сгенерированный протокол преобразуется в PDF-документ
6. Пользователь получает готовый PDF-файл и текстовую версию протокола

## Установка и настройка

### Предварительные требования:
- Python 3.8 или выше
- Установленный ffmpeg
- Минимум 8 ГБ оперативной памяти (рекомендуется 16 ГБ)

### Шаги по установке:
1. Установите Ollama, следуя инструкциям в файле OLLAMA_SETUP.md
2. Загрузите модель LLaMA 3 или Mistral через Ollama
3. Установите дополнительные зависимости из обновленного файла requirements.txt
4. Запустите бота с помощью команды `python src/bot.py`

## Использование

### Команды бота:
- `/start` - начало работы с ботом
- `/help` - получение справки
- `/protocol` - начало процесса создания протокола встречи

### Процесс создания протокола:
1. Отправьте команду `/protocol`
2. Отправьте голосовое сообщение с резюме встречи
3. Дождитесь обработки (может занять некоторое время в зависимости от длины сообщения)
4. Получите готовый PDF-документ и текстовую версию протокола

## Примечания и ограничения

- Первый запрос к модели может занять больше времени, последующие будут быстрее
- Качество структурирования зависит от четкости и структурированности исходного голосового сообщения
- Для лучших результатов рекомендуется говорить четко и структурированно
- Максимальная длина голосового сообщения ограничена возможностями Telegram (до 20 минут)
- Ollama должен быть запущен до запуска бота

## Дальнейшее развитие

Возможные направления для улучшения функциональности:
- Добавление шаблонов для разных типов встреч
- Интеграция с календарем для автоматического заполнения даты и участников
- Улучшение дизайна PDF-документов
- Добавление возможности редактирования протокола перед финальной генерацией PDF
